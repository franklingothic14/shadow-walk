<!DOCTYPE html>
<html>
<head><meta charset="UTF-8">
  <title>Shaded Route</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>#map{height:80vh;} #ctrl{padding:10px;}</style>
</head>
<body>
<h2>Shaded Route</h2>
<div id="map"></div>
<div id="ctrl">
  From: <input id="from" value="49.88,23.99"/>
  To: <input id="to" value="49.89,24.01"/>
  Time: <input id="time" type="datetime-local" value="2025-06-11T15:00"/>
  <button id="go">Go</button>
</div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const apiUrl = 'https://YOUR_RAILWAY_URL/api/shaded-route';

const map = L.map('map').setView([49.88,23.99],13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

document.getElementById('go').onclick = async () => {
  const [from, to, time] = [
    document.getElementById('from').value,
    document.getElementById('to').value,
    new Date(document.getElementById('time').value).toISOString()
  ];
  const res = await fetch(`${apiUrl}?from=${from}&to=${to}&time=${time}`);
  const d = await res.json();
  console.log(d);
  L.geoJSON(d.route, {
    style: feat => ({
      color: feat.properties.shaded ? 'green' : 'orange',
      weight: 5
    })
  }).addTo(map);
};
</script>
</body>
</html>
